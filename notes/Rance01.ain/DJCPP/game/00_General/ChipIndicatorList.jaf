ChipIndicatorList::ChipIndicatorList()
/* 000664d0 */{
/* 000664d8 */	this.gameObjectId_ = g_gameObjectManager.add(this.update);
/* 000664fa */}

void ChipIndicatorList::update()
/* 00066502 */{
/* 00066502 */	if (this.isUpdatedParameterOnSleep_)
/* 0006650c */	{
/* 0006650c */		this.isUpdatedParameterOnSleep_ = false;
/* 00066516 */		this.resetView();
/* 0006651e */	}
/* 00066524 */}

void ChipIndicatorList::init(ref ChipDepository instance, int yPos)
/* 0006652c */{
/* 0006652c */	this.instance_ <- instance;
/* 00066548 */	this.instance_.addEventHandler(this.onEvent);
/* 0006655e */	this.count_ = this.instance_.getSize();
/* 00066576 */	this.groupCount_ = getChipGroupCount(this.count_);
/* 0006658e */	this.xPos_ = getIndicatorXPos(this.groupCount_);
/* 000665a6 */	this.yPos_ = yPos;
/* 000665b0 */	this.initParts();
/* 000665b8 */	this.resetView();
/* 000665c0 */}

void ChipIndicatorList::initParts()
/* 000665c8 */{
/* 000665c8 */	this.parts_[0].init("システム／チップインジケータ／カーソル", 0);
/* 000665e8 */	this.parts_[0].setPos(-10, -10, 300);
/* 0006660e */	this.parts_[0].setShow(true);
/* 00066628 */	this.parts_[0].setCgRange(0, 0, this.parts_[0].getWidth() / 3, this.parts_[0].getHeight());
/* 00066678 */	createPartsGroup(this.parent_, this.parts_, 4300);
/* 00066690 */	this.parent_.setPos(this.xPos_, this.yPos_, -2147483648);
/* 000666ae */}

void ChipIndicatorList::initIndicator()
/* 000666b6 */{
/* 000666b6 */	this.indicator_.Free();
/* 000666c0 */	this.indicator_.Alloc(this.count_);
/* 000666d6 */	int i;
/* 000666e0 */	for (i = 0; i < this.count_; ++i)
/* 00066710 */	{
/* 00066710 */		this.indicator_[i].init(this.instance_.getInstance(i));
/* 00066744 */		this.indicator_[i].setParent(this.parent_.getPartsNumber());
/* 00066764 */	}
/* 00066770 */	this.setIndicatorPos();
/* 00066778 */}

void ChipIndicatorList::resetView()
/* 00066780 */{
/* 00066780 */	this.count_ = this.instance_.getSize();
/* 00066798 */	this.groupCount_ = getChipGroupCount(this.count_);
/* 000667b0 */	this.initIndicator();
/* 000667b8 */	this.fadeIn(this.state_ == 2);
/* 000667d0 */}

void ChipIndicatorList::setIndicatorPos()
/* 000667d8 */{
/* 000667d8 */	int i;
/* 000667e2 */	for (i = 0; i < this.indicator_.Numof(); ++i)
/* 00066812 */	{
/* 00066812 */		int group = i / 7;
/* 0006682c */		int n = i % 7;
/* 00066846 */		this.indicator_[i].setPos(8 + group * 168 + n * 20, 12);
/* 00066886 */	}
/* 0006688c */}

void ChipIndicatorList::fadeIn(bool val)
/* 00066894 */{
/* 00066894 */	this.state_ = val ? 2 : 0;
/* 000668be */	int i;
/* 000668c8 */	for (i = 0; i < this.indicator_.Numof(); ++i)
/* 000668f8 */	{
/* 000668f8 */		this.indicator_[i].fadeIn(val);
/* 00066912 */	}
/* 00066918 */	this.parent_.setShow(val);
/* 0006692a */}

void ChipIndicatorList::setFloatingPage(float page)
/* 00066932 */{
/* 00066932 */	this.parts_[0].setPos(page * 168.0 - 10.0, -10, -2147483648);
/* 0006696a */}

int ChipIndicatorList::getClickedGroup()
/* 00066972 */{
/* 00066972 */	if (!g_mouse.isClick(0))
/* 0006698c */	{
/* 0006698c */		return -1;
/* 00066994 */	}
/* 0006699a */	int i;
/* 000669a4 */	for (i = 0; i < this.groupCount_; ++i)
/* 000669d4 */	{
/* 000669d4 */		bool n = isCollideWithMouseWH(this.parent_.getScreenX() + 168 * i, this.parent_.getScreenY(), 168, 40);
/* 00066a1a */		if (n)
/* 00066a26 */		{
/* 00066a26 */			return i;
/* 00066a2e */		}
/* 00066a34 */	}
/* 00066a3a */	return -1;
/* 00066a42 */}

void ChipIndicatorList::onEvent(int type, int info)
/* 00066a50 */{
/* 00066a50 */	if (g_gameObjectManager.getSleepLevel(this.gameObjectId_) > 0)
/* 00066a70 */	{
/* 00066a70 */		this.isUpdatedParameterOnSleep_ = true;
/* 00066a7a */		return;
/* 00066a7c */	}
/* 00066a82 */	switch (type)
/* 00066a94 */	{
/* 00066a94 */	case 0:
/* 00066a94 */		this.indicator_[info].init(this.instance_.getInstance(info));
/* 00066ac8 */		this.indicator_[info].setParent(this.parent_.getPartsNumber());
/* 00066ae8 */		this.setIndicatorPos();
/* 00066af0 */		break;
/* 00066afc */	case 1:
/* 00066afc */		this.indicator_.Erase(info);
/* 00066b0e */		this.indicator_.Realloc(this.indicator_.Numof() + 1);
/* 00066b2c */		this.indicator_[this.indicator_.Numof() - 1].init(NULL);
/* 00066b4e */		this.indicator_[this.indicator_.Numof() - 1].setParent(this.parent_.getPartsNumber());
/* 00066b76 */		this.indicator_[this.indicator_.Numof() - 1].fadeIn(true);
/* 00066b98 */		this.setIndicatorPos();
/* 00066ba0 */		break;
/* 00066bac */	}
/* 00066bac */}

int getChipGroupCount(int count)
/* 00066bba */{
/* 00066bba */	return (count + 6) / 7;
/* 00066bd2 */}

void ChipIndicatorList::setParent(int parentPartsNumber)
/* 00066be6 */{
/* 00066be6 */	this.parent_.setPos(-2147483648, -2147483648, 100);
/* 00066c04 */	this.parent_.setParent(parentPartsNumber);
/* 00066c16 */}

bool ChipIndicatorList::isHover()
/* 00066c1e */{
/* 00066c1e */	return isCollideWithMouseWH(this.parent_.getScreenX(), this.parent_.getScreenY(), 168 * this.groupCount_, 40);
/* 00066c52 */}

